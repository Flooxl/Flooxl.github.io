<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∏–±–µ—Ä-–ê—É–¥–∏—Ç: 3D –û—Ñ–∏—Å–Ω–∞—è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background: #0a0a1a;
            color: #00ff00;
            overflow: hidden;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        canvas {
            display: block;
            background: #000;
        }
        
        #ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .ui-panel {
            position: absolute;
            background: rgba(10, 20, 30, 0.95);
            border: 2px solid #00ff00;
            padding: 15px;
            pointer-events: all;
        }
        
        #task-panel {
            top: 20px;
            left: 20px;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        #stats-panel {
            top: 20px;
            right: 20px;
            width: 300px;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border: 1px solid #00ff00;
            text-align: center;
        }
        
        .task {
            background: rgba(0, 50, 0, 0.3);
            border: 1px solid #005500;
            padding: 10px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }
        
        .task:hover {
            background: rgba(0, 100, 0, 0.3);
            border-color: #00ff00;
        }
        
        .task.completed {
            background: rgba(0, 100, 0, 0.5);
            border-color: #00ff00;
        }
        
        .task.failed {
            background: rgba(100, 0, 0, 0.5);
            border-color: #ff0000;
        }
        
        .task.tricky {
            border-color: #ff9900;
            background: rgba(255, 100, 0, 0.1);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: #001a00;
            border: 3px solid #00ff00;
            padding: 30px;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
        }
        
        .button {
            background: #003300;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px 20px;
            margin: 8px 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .button:hover {
            background: #005500;
        }
        
        .button.danger {
            background: #330000;
            border-color: #ff0000;
        }
        
        .button.tricky {
            background: #333300;
            border-color: #ff9900;
            color: #ff9900;
        }
        
        .button.success {
            background: #003300;
            border-color: #00ff00;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 100, 0, 0.9);
            color: white;
            padding: 15px;
            border: 1px solid #ff6600;
            display: none;
            z-index: 1001;
            max-width: 300px;
        }
        
        .warning {
            background: rgba(255, 50, 50, 0.9) !important;
            border-color: #ff0000 !important;
        }
        
        .success-notification {
            background: rgba(0, 150, 0, 0.9) !important;
            border-color: #00ff00 !important;
        }
        
        .progress-bar {
            width: 100%;
            height: 15px;
            background: #003300;
            border: 1px solid #00ff00;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #00ff00;
            width: 0%;
            transition: width 0.5s;
        }
        
        #minimap {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 150px;
            height: 150px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff00;
        }
        
        #crosshair {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            pointer-events: none;
        }
        
        .crosshair-dot {
            width: 4px;
            height: 4px;
            background: #00ff00;
            position: absolute;
            top: 8px;
            left: 8px;
        }
        
        .crosshair-line {
            position: absolute;
            background: #00ff00;
        }
        
        .crosshair-line.horizontal {
            width: 20px;
            height: 2px;
            top: 9px;
            left: 0;
        }
        
        .crosshair-line.vertical {
            width: 2px;
            height: 20px;
            top: 0;
            left: 9px;
        }
        
        #final-report {
            display: none;
        }
        
        .score-badge {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
        
        .score-excellent { color: #00ff00; }
        .score-good { color: #ff9900; }
        .score-poor { color: #ff0000; }
        
        .email {
            border: 1px solid #444;
            margin: 10px 0;
            padding: 10px;
            cursor: pointer;
        }
        
        .email.suspicious:hover {
            border-color: #ff0000;
            background: rgba(255, 0, 0, 0.1);
        }
        
        .email.legitimate:hover {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.1);
        }
        
        .hint {
            color: #ff9900;
            font-size: 12px;
            font-style: italic;
            margin-top: 5px;
        }
        
        .trap-button {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { background: #333300; }
            50% { background: #666600; }
            100% { background: #333300; }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        
        <div id="ui-overlay">
            <div id="crosshair">
                <div class="crosshair-dot"></div>
                <div class="crosshair-line horizontal"></div>
                <div class="crosshair-line vertical"></div>
            </div>
            
            <div class="ui-panel" id="task-panel">
                <h3>üîí –ó–ê–î–ê–ù–ò–Ø –ê–£–î–ò–¢–ê</h3>
                <div id="tasks-list"></div>
            </div>
            
            <div class="ui-panel" id="stats-panel">
                <h3>üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                <div>–í—Ä–µ–º—è: <span id="time-display">18:00</span></div>
                <div>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: <span id="security-score">100%</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="security-progress"></div>
                </div>
                <div>–ó–∞–¥–∞–Ω–∏–π: <span id="tasks-completed">0/12</span></div>
                <div>–ù–∞—Ä—É—à–µ–Ω–∏–π: <span id="violations-count">0</span></div>
            </div>
            
            <div id="controls">
                <div>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: WASD - –¥–≤–∏–∂–µ–Ω–∏–µ, –º—ã—à—å - –ø–æ–≤–æ—Ä–æ—Ç, –õ–ö–ú - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ</div>
                <div style="margin-top: 5px; font-size: 12px; color: #888;">
                    –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –≤—ã–π—Ç–∏ —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω—É—é –¥–≤–µ—Ä—å
                </div>
            </div>
            
            <div id="minimap"></div>
        </div>
        
        <div id="computer-modal" class="modal">
            <div class="modal-content" id="computer-content"></div>
        </div>
        
        <div id="phone-modal" class="modal">
            <div class="modal-content" id="phone-content"></div>
        </div>
        
        <div id="router-modal" class="modal">
            <div class="modal-content" id="router-content"></div>
        </div>
        
        <div id="server-modal" class="modal">
            <div class="modal-content" id="server-content"></div>
        </div>
        
        <div id="printer-modal" class="modal">
            <div class="modal-content" id="printer-content"></div>
        </div>
        
        <div id="safe-modal" class="modal">
            <div class="modal-content" id="safe-content"></div>
        </div>
        
        <div class="notification" id="notification"></div>
        
        <div id="final-report" class="modal">
            <div class="modal-content">
                <h2 style="text-align: center; color: #ff0000;">–û–¢–ß–Å–¢ –ö–ò–ë–ï–†-–ê–£–î–ò–¢–ê</h2>
                <div id="final-score" class="score-badge">0%</div>
                
                <h3>üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò:</h3>
                <div id="report-details"></div>
                
                <h3>‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò:</h3>
                <div id="completed-tasks-list"></div>
                
                <h3>‚ö†Ô∏è –ù–ê–†–£–®–ï–ù–ò–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò:</h3>
                <div id="final-violations"></div>
                
                <h3>üí° –û–¶–ï–ù–ö–ê –ö–ò–ë–ï–†–ì–†–ê–ú–û–¢–ù–û–°–¢–ò:</h3>
                <div id="cyber-literacy-assessment"></div>
                
                <h3>üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:</h3>
                <div id="recommendations-list"></div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="button" onclick="restartGame()">üîÑ –ü–†–û–ô–¢–ò –ê–£–î–ò–¢ –°–ù–û–í–ê</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== 3D –î–í–ò–ñ–û–ö ==========
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        
        // –†–∞–∑–º–µ—Ä—ã –∫–∞–Ω–≤–∞—Å–∞
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∏—Ä–∞
        const world = {
            width: 40,
            height: 40,
            grid: [],
            objects: []
        };
        
        // –ò–≥—Ä–æ–∫
        const player = {
            x: 5,
            y: 5,
            height: 1.7,
            angle: 0,
            speed: 0.1,
            fov: Math.PI / 3,
            moveSpeed: 0.15,
            rotateSpeed: 0.04
        };
        
        // –ö–ª–∞–≤–∏—à–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        const keys = {
            w: false, a: false, s: false, d: false
        };
        
        // –ú—ã—à—å
        let mouse = { x: 0, y: 0 };
        let mouseSensitivity = 0.002;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∏—Ä–∞
        function initWorld() {
            // –°–æ–∑–¥–∞–µ–º —Å–µ—Ç–∫—É
            for (let x = 0; x < world.width; x++) {
                world.grid[x] = [];
                for (let y = 0; y < world.height; y++) {
                    // –ì—Ä–∞–Ω–∏—Ü—ã - —Å—Ç–µ–Ω—ã
                    if (x === 0 || y === 0 || x === world.width-1 || y === world.height-1) {
                        world.grid[x][y] = 1; // –°—Ç–µ–Ω–∞
                    } else {
                        world.grid[x][y] = 0; // –ü—É—Å—Ç–æ
                    }
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç–µ–Ω—ã –¥–ª—è –∫–æ–º–Ω–∞—Ç
            // –ö–æ–º–Ω–∞—Ç–∞ 1
            for (let x = 3; x <= 12; x++) world.grid[x][12] = 1;
            for (let y = 3; y <= 12; y++) world.grid[12][y] = 1;
            world.grid[12][5] = 0; // –î–≤–µ—Ä—å
            
            // –ö–æ–º–Ω–∞—Ç–∞ 2
            for (let x = 15; x <= 25; x++) world.grid[x][12] = 1;
            for (let y = 3; y <= 12; y++) world.grid[25][y] = 1;
            world.grid[25][8] = 0; // –î–≤–µ—Ä—å
            
            // –°–µ—Ä–≤–µ—Ä–Ω–∞—è
            for (let x = 28; x <= 35; x++) world.grid[x][20] = 1;
            for (let y = 15; y <= 20; y++) world.grid[28][y] = 1;
            world.grid[35][15] = 0; // –î–≤–µ—Ä—å
            
            // –û–±—ä–µ–∫—Ç—ã –æ—Ñ–∏—Å–∞
            world.objects = [
                // –†–∞–±–æ—á–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã
                { type: 'computer', x: 5, y: 7, interactable: true, task: 'check_computer1' },
                { type: 'computer', x: 8, y: 10, interactable: true, task: 'check_computer2' },
                
                // –¢–µ–ª–µ—Ñ–æ–Ω—ã
                { type: 'phone', x: 6, y: 3, interactable: true, task: 'check_phone1' },
                { type: 'phone', x: 10, y: 3, interactable: true, task: 'check_phone2' },
                
                // –†–æ—É—Ç–µ—Ä –∏ —Å–µ—Ç–µ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
                { type: 'router', x: 18, y: 5, interactable: true, task: 'check_router' },
                { type: 'server', x: 20, y: 8, interactable: true, task: 'check_server' },
                
                // –ü—Ä–∏–Ω—Ç–µ—Ä—ã –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è
                { type: 'printer', x: 17, y: 10, interactable: true, task: 'check_printer' },
                { type: 'safe', x: 22, y: 3, interactable: true, task: 'check_safe' },
                
                // –î–æ–∫—É–º–µ–Ω—Ç—ã
                { type: 'documents', x: 4, y: 9, interactable: true, task: 'check_documents' },
                { type: 'whiteboard', x: 9, y: 5, interactable: false },
                
                // –ì–ª–∞–≤–Ω—ã–π –≤—ã—Ö–æ–¥
                { type: 'exit', x: 1, y: 20, interactable: true, task: 'exit_office' },
                
                // –†–∞–∑–ª–∏—á–Ω—ã–π –æ—Ñ–∏—Å–Ω—ã–π —Ö–ª–∞–º (–ª–æ–≤—É—à–∫–∏)
                { type: 'usb_drive', x: 7, y: 8, interactable: true, task: 'trap_usb' },
                { type: 'coffee_machine', x: 3, y: 4, interactable: true, task: 'trap_coffee' },
                { type: 'plant', x: 11, y: 11, interactable: false },
                { type: 'chair', x: 6, y: 6, interactable: false },
                { type: 'chair', x: 9, y: 9, interactable: false },
                { type: 'table', x: 8, y: 8, interactable: false }
            ];
        }
        
        // 3D —Ä–µ–Ω–¥–µ—Ä–µ—Ä
        function render3D() {
            const width = canvas.width;
            const height = canvas.height;
            
            // –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, width, height);
            
            // –†–µ–Ω–¥–µ—Ä –ø–æ–ª–∞ –∏ –ø–æ—Ç–æ–ª–∫–∞
            ctx.fillStyle = '#224422';
            ctx.fillRect(0, height/2, width, height/2); // –ü–æ–ª
            
            ctx.fillStyle = '#111133';
            ctx.fillRect(0, 0, width, height/2); // –ü–æ—Ç–æ–ª–æ–∫
            
            // Raycasting –¥–ª—è —Å—Ç–µ–Ω
            const rayCount = width;
            for (let i = 0; i < rayCount; i++) {
                const rayAngle = player.angle - player.fov/2 + (i / rayCount) * player.fov;
                
                let distance = 0;
                let hitWall = false;
                let hitObject = null;
                
                // –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ª—É—á–∞
                while (!hitWall && distance < 20) {
                    distance += 0.1;
                    
                    // –ü–æ–∑–∏—Ü–∏—è –ª—É—á–∞
                    const rayX = player.x + Math.sin(rayAngle) * distance;
                    const rayY = player.y + Math.cos(rayAngle) * distance;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–µ–Ω—ã
                    const gridX = Math.floor(rayX);
                    const gridY = Math.floor(rayY);
                    
                    if (gridX < 0 || gridX >= world.width || gridY < 0 || gridY >= world.height) {
                        hitWall = true;
                    } else if (world.grid[gridX][gridY] === 1) {
                        hitWall = true;
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤
                    if (!hitWall) {
                        for (const obj of world.objects) {
                            const objDist = Math.sqrt(
                                Math.pow(rayX - obj.x, 2) + 
                                Math.pow(rayY - obj.y, 2)
                            );
                            if (objDist < 0.5 && obj.interactable) {
                                hitObject = obj;
                                break;
                            }
                        }
                    }
                }
                
                // –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –∏—Å–∫–∞–∂–µ–Ω–∏—è
                distance *= Math.cos(player.angle - rayAngle);
                
                // –í—ã—Å–æ—Ç–∞ —Å—Ç–µ–Ω—ã
                const wallHeight = Math.min(height, height / (distance + 0.0001));
                
                // –¶–≤–µ—Ç —Å—Ç–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
                const brightness = Math.max(50, 255 - distance * 30);
                const wallColor = `rgb(${brightness}, ${brightness}, ${brightness})`;
                
                // –†–∏—Å—É–µ–º —Å—Ç–µ–Ω—É
                ctx.fillStyle = wallColor;
                const wallTop = (height - wallHeight) / 2;
                ctx.fillRect(i, wallTop, 1, wallHeight);
                
                // –†–∏—Å—É–µ–º –æ–±—ä–µ–∫—Ç—ã
                if (hitObject && distance < 5) {
                    const objHeight = Math.min(height/3, height / (distance + 0.0001));
                    const objTop = (height - objHeight) / 2;
                    
                    // –¶–≤–µ—Ç –æ–±—ä–µ–∫—Ç–∞
                    let objColor = '#00ff00';
                    if (hitObject.type === 'exit') objColor = '#ff0000';
                    else if (hitObject.type.includes('trap')) objColor = '#ff9900';
                    
                    ctx.fillStyle = objColor;
                    ctx.fillRect(i - 2, objTop - objHeight/4, 5, objHeight * 1.5);
                }
            }
            
            // –†–µ–Ω–¥–µ—Ä –º–∏–Ω–∏-–∫–∞—Ä—Ç—ã
            renderMinimap();
        }
        
        function renderMinimap() {
            const mapSize = 150;
            const mapScale = mapSize / Math.max(world.width, world.height);
            const mapX = canvas.width - mapSize - 20;
            const mapY = 20;
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(mapX, mapY, mapSize, mapSize);
            
            // –°–µ—Ç–∫–∞
            ctx.strokeStyle = '#00ff00';
            ctx.strokeRect(mapX, mapY, mapSize, mapSize);
            
            // –°—Ç–µ–Ω—ã
            ctx.fillStyle = '#666666';
            for (let x = 0; x < world.width; x++) {
                for (let y = 0; y < world.height; y++) {
                    if (world.grid[x][y] === 1) {
                        ctx.fillRect(
                            mapX + x * mapScale,
                            mapY + y * mapScale,
                            mapScale, mapScale
                        );
                    }
                }
            }
            
            // –û–±—ä–µ–∫—Ç—ã
            world.objects.forEach(obj => {
                let color = '#00ff00';
                if (obj.type === 'exit') color = '#ff0000';
                else if (!obj.interactable) color = '#888888';
                else if (obj.type.includes('trap')) color = '#ff9900';
                
                ctx.fillStyle = color;
                ctx.fillRect(
                    mapX + obj.x * mapScale - 2,
                    mapY + obj.y * mapScale - 2,
                    4, 4
                );
            });
            
            // –ò–≥—Ä–æ–∫
            ctx.fillStyle = '#ff0000';
            ctx.beginPath();
            ctx.arc(
                mapX + player.x * mapScale,
                mapY + player.y * mapScale,
                3, 0, Math.PI * 2
            );
            ctx.fill();
            
            // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
            ctx.strokeStyle = '#ff0000';
            ctx.beginPath();
            ctx.moveTo(
                mapX + player.x * mapScale,
                mapY + player.y * mapScale
            );
            ctx.lineTo(
                mapX + (player.x + Math.sin(player.angle) * 3) * mapScale,
                mapY + (player.y + Math.cos(player.angle) * 3) * mapScale
            );
            ctx.stroke();
        }
        
        // ========== –ò–ì–†–û–í–ê–Ø –õ–û–ì–ò–ö–ê ==========
        const gameState = {
            time: 18.00,
            securityScore: 100,
            completedTasks: 0,
            totalTasks: 12,
            violations: [],
            trapsTriggered: 0,
            isDayEnded: false,
            trickyTasksCompleted: 0
        };
        
        // –ó–∞–¥–∞–Ω–∏—è —Å –ø–æ–¥–≤–æ—Ö–∞–º–∏
        const securityTasks = [
            // –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
            {
                id: 'check_computer1',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ò–≤–∞–Ω–æ–≤–∞',
                description: '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Å—Å–∏—é, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è',
                completed: false,
                points: 10,
                tricky: false
            },
            {
                id: 'check_computer2',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–µ',
                description: '–£–¥–∞–ª–∏—Ç—å –ª–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã, –≤—ã–π—Ç–∏ –∏–∑ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π',
                completed: false,
                points: 10,
                tricky: false
            },
            {
                id: 'check_phone1',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—á–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω',
                description: '–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π',
                completed: false,
                points: 8,
                tricky: false
            },
            {
                id: 'check_phone2',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ —Ä–µ—Å–µ–ø—à–µ–Ω–µ',
                description: '–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫ —Å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π',
                completed: false,
                points: 8,
                tricky: false
            },
            {
                id: 'check_router',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä',
                description: '–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞',
                completed: false,
                points: 12,
                tricky: true
            },
            {
                id: 'check_server',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é',
                description: '–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø—ã, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø—ã',
                completed: false,
                points: 15,
                tricky: true
            },
            {
                id: 'check_printer',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –ø—Ä–∏–Ω—Ç–µ—Ä',
                description: '–û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –ø–µ—á–∞—Ç–∏, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
                completed: false,
                points: 8,
                tricky: false
            },
            {
                id: 'check_safe',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—Ñ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏',
                description: '–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ–π—Ñ –∑–∞–∫—Ä—ã—Ç, –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ',
                completed: false,
                points: 10,
                tricky: true
            },
            {
                id: 'check_documents',
                name: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã',
                description: '–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —Å –ø–∞—Ä–æ–ª—è–º–∏',
                completed: false,
                points: 8,
                tricky: false
            },
            // –õ–æ–≤—É—à–∫–∏ (–Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –Ω–æ –æ–Ω–∏ –ø—Ä–∏–≤–ª–µ–∫–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ)
            {
                id: 'trap_usb',
                name: '–ù–ê–ô–î–ï–ù USB-–ù–ê–ö–û–ü–ò–¢–ï–õ–¨',
                description: '‚ö†Ô∏è –ù–ï –í–°–¢–ê–í–õ–Ø–¢–¨! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –ª–æ–≤—É—à–∫–∞',
                completed: false,
                points: 0,
                tricky: true,
                isTrap: true
            },
            {
                id: 'trap_coffee',
                name: '–ö–û–§–ï-–ú–ê–®–ò–ù–ê –¢–†–ï–ë–£–ï–¢ –ù–ê–°–¢–†–û–ô–ö–ò',
                description: '‚ö†Ô∏è –≠—Ç–æ –Ω–µ IT –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ! –ù–µ —Ç—Ä–∞—Ç—å—Ç–µ –≤—Ä–µ–º—è',
                completed: false,
                points: 0,
                tricky: true,
                isTrap: true
            },
            {
                id: 'exit_office',
                name: '–í–´–ô–¢–ò –ò–ó –û–§–ò–°–ê',
                description: '–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –í–°–ï–• —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á',
                completed: false,
                points: 20,
                tricky: false,
                isExit: true
            }
        ];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            initWorld();
            updateTaskList();
            updateStats();
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∞–º–∏
            window.addEventListener('keydown', (e) => {
                const key = e.key.toLowerCase();
                if (['w', 'a', 's', 'd', '—Ü', '—Ñ', '—ã', '–≤'].includes(key)) {
                    keys[key] = true;
                }
            });
            
            window.addEventListener('keyup', (e) => {
                const key = e.key.toLowerCase();
                if (['w', 'a', 's', 'd', '—Ü', '—Ñ', '—ã', '–≤'].includes(key)) {
                    keys[key] = false;
                }
            });
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—ã—à—å—é
            canvas.addEventListener('mousemove', (e) => {
                if (document.pointerLockElement === canvas) {
                    const movementX = e.movementX || 0;
                    player.angle += movementX * mouseSensitivity;
                }
            });
            
            canvas.addEventListener('click', () => {
                if (!document.pointerLockElement) {
                    canvas.requestPointerLock();
                } else {
                    checkInteraction();
                }
            });
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            gameLoop();
            startTimer();
            
            // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            setTimeout(() => {
                showNotification('üîí –í—ã - –∞—É–¥–∏—Ç–æ—Ä –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ñ–∏—Å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º!');
                showInstruction();
            }, 1000);
        }
        
        function gameLoop() {
            if (!gameState.isDayEnded) {
                updatePlayer();
                render3D();
            }
            requestAnimationFrame(gameLoop);
        }
        
        function updatePlayer() {
            // –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥
            if (keys.w || keys.—Ü) {
                const newX = player.x + Math.sin(player.angle) * player.moveSpeed;
                const newY = player.y + Math.cos(player.angle) * player.moveSpeed;
                
                if (!isCollision(newX, newY)) {
                    player.x = newX;
                    player.y = newY;
                }
            }
            
            if (keys.s || keys.—ã) {
                const newX = player.x - Math.sin(player.angle) * player.moveSpeed;
                const newY = player.y - Math.cos(player.angle) * player.moveSpeed;
                
                if (!isCollision(newX, newY)) {
                    player.x = newX;
                    player.y = newY;
                }
            }
            
            // –°—Ç–æ—Ä–æ–Ω–Ω–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
            if (keys.a || keys.—Ñ) {
                const newX = player.x - Math.cos(player.angle) * player.moveSpeed;
                const newY = player.y + Math.sin(player.angle) * player.moveSpeed;
                
                if (!isCollision(newX, newY)) {
                    player.x = newX;
                    player.y = newY;
                }
            }
            
            if (keys.d || keys.–≤) {
                const newX = player.x + Math.cos(player.angle) * player.moveSpeed;
                const newY = player.y - Math.sin(player.angle) * player.moveSpeed;
                
                if (!isCollision(newX, newY)) {
                    player.x = newX;
                    player.y = newY;
                }
            }
        }
        
        function isCollision(x, y) {
            const gridX = Math.floor(x);
            const gridY = Math.floor(y);
            
            if (gridX < 0 || gridX >= world.width || gridY < 0 || gridY >= world.height) {
                return true;
            }
            
            return world.grid[gridX][gridY] === 1;
        }
        
        function checkInteraction() {
            // –ë—Ä–æ—Å–∞–µ–º –ª—É—á –≤–ø–µ—Ä–µ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
            const checkDistance = 2;
            const checkX = player.x + Math.sin(player.angle) * checkDistance;
            const checkY = player.y + Math.cos(player.angle) * checkDistance;
            
            // –ò—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π –æ–±—ä–µ–∫—Ç
            let closestObj = null;
            let closestDist = Infinity;
            
            for (const obj of world.objects) {
                if (obj.interactable) {
                    const dist = Math.sqrt(
                        Math.pow(checkX - obj.x, 2) + 
                        Math.pow(checkY - obj.y, 2)
                    );
                    
                    if (dist < 1.5 && dist < closestDist) {
                        closestDist = dist;
                        closestObj = obj;
                    }
                }
            }
            
            if (closestObj) {
                interactWithObject(closestObj);
            }
        }
        
        function interactWithObject(obj) {
            switch(obj.type) {
                case 'computer':
                    showComputerCheck(obj.task);
                    break;
                case 'phone':
                    showPhoneCheck(obj.task);
                    break;
                case 'router':
                    showRouterCheck();
                    break;
                case 'server':
                    showServerCheck();
                    break;
                case 'printer':
                    showPrinterCheck();
                    break;
                case 'safe':
                    showSafeCheck();
                    break;
                case 'documents':
                    showDocumentsCheck();
                    break;
                case 'usb_drive':
                    showUSBTrap();
                    break;
                case 'coffee_machine':
                    showCoffeeTrap();
                    break;
                case 'exit':
                    attemptExit();
                    break;
            }
        }
        
        // ========== –ò–ù–¢–ï–†–§–ï–ô–°–´ –ü–†–û–í–ï–†–û–ö ==========
        function showComputerCheck(taskId) {
            const task = securityTasks.find(t => t.id === taskId);
            let content = '';
            
            if (taskId === 'check_computer1') {
                content = `
                    <h2>üíª –ö–û–ú–ü–¨–Æ–¢–ï–† –°–û–¢–†–£–î–ù–ò–ö–ê –ò–í–ê–ù–û–í–ê</h2>
                    <p>–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:</p>
                    
                    <div style="margin: 20px 0;">
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–°–µ—Å—Å–∏—è Windows –∞–∫—Ç–∏–≤–Ω–∞:</h4>
                            <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤—ã—à–µ–ª –∏–∑ —Å–∏—Å—Ç–µ–º—ã</p>
                            <button class="button" onclick="showNotification('–°–µ—Å—Å–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞')">üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button class="button tricky" onclick="showNotification('‚ö†Ô∏è –≠—Ç–æ —Ç–µ—Å—Ç! –ù–µ –Ω—É–∂–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å')">üìù –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –û–°:</h4>
                            <p>–î–æ—Å—Ç—É–ø–Ω—ã 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</p>
                            <button class="button" onclick="showNotification('–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã')">üîÑ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å</button>
                            <button class="button tricky" onclick="triggerTrap('–û—Ç–ª–æ–∂–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é')">‚è∞ –û—Ç–ª–æ–∂–∏—Ç—å –Ω–∞ –Ω–µ–¥–µ–ª—é</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</h4>
                            <p>–ü–æ–¥–∫–ª—é—á–µ–Ω–∞ —Ñ–ª–µ—à–∫–∞ "–õ–∏—á–Ω—ã–µ —Ñ–æ—Ç–æ"</p>
                            <button class="button" onclick="showNotification('USB –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω')">üìÄ –ò–∑–≤–ª–µ—á—å</button>
                            <button class="button danger" onclick="triggerTrap('–ü—Ä–æ–≤–µ—Ä–∏–ª –ª–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞')">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ê–Ω—Ç–∏–≤–∏—Ä—É—Å:</h4>
                            <p>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–ª–∏ –Ω–∞ 15 –¥–Ω–µ–π</p>
                            <button class="button" onclick="showNotification('–ë–∞–∑—ã –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã')">üõ°Ô∏è –û–±–Ω–æ–≤–∏—Ç—å</button>
                            <button class="button tricky trap-button" onclick="triggerTrap('–û—Ç–∫–ª—é—á–∏–ª –∞–Ω—Ç–∏–≤–∏—Ä—É—Å "—á—Ç–æ–±—ã –Ω–µ —Ç–æ—Ä–º–æ–∑–∏–ª"')">‚ö° –û—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω—Ç–∏–≤–∏—Ä—É—Å</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="button success" onclick="completeTask('${taskId}')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                        <button class="button" onclick="closeModal('computer')">‚ùå –í–´–ô–¢–ò</button>
                    </div>
                `;
            } else {
                content = `
                    <h2>üíª –ö–û–ú–ü–¨–Æ–¢–ï–† –í –ü–ï–†–ï–ì–û–í–û–†–ö–ï</h2>
                    
                    <div style="margin: 20px 0;">
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:</h4>
                            <p>–ù–∞–π–¥–µ–Ω–æ 8 —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π –æ—Ç —Ä–∞–±–æ—á–∏—Ö —Å–∏—Å—Ç–µ–º</p>
                            <button class="button" onclick="showNotification('–ü–∞—Ä–æ–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞')">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
                            <button class="button tricky" onclick="triggerTrap('–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª –ø–∞—Ä–æ–ª–∏ –≤ —Ñ–∞–π–ª "–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"')">üíæ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö:</h4>
                            <p>–ê–∫—Ç–∏–≤–Ω—ã —Å–µ—Å—Å–∏–∏ –≤ Google Drive, Dropbox, OneDrive</p>
                            <button class="button" onclick="showNotification('–í—Å–µ —Å–µ—Å—Å–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã')">üö™ –í—ã–π—Ç–∏ –∏–∑ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤</button>
                            <button class="button tricky" onclick="triggerTrap('–°–¥–µ–ª–∞–ª —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –Ω–∞ –ª–∏—á–Ω—ã–π –æ–±–ª–∞—á–Ω—ã–π –¥–∏—Å–∫')">‚òÅÔ∏è –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞:</h4>
                            <p>–°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—Å–µ—â–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö —Å–æ—Ü—Å–µ—Ç–µ–π –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</p>
                            <button class="button" onclick="showNotification('–ò—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞')">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                            <button class="button danger" onclick="triggerTrap('–°–æ—Ö—Ä–∞–Ω–∏–ª –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –æ—Ç—á–µ—Ç–∞ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É')">üìã –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="button success" onclick="completeTask('${taskId}')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                        <button class="button" onclick="closeModal('computer')">‚ùå –í–´–ô–¢–ò</button>
                    </div>
                `;
            }
            
            document.getElementById('computer-content').innerHTML = content;
            document.getElementById('computer-modal').style.display = 'flex';
        }
        
        function showPhoneCheck(taskId) {
            let content = '';
            
            if (taskId === 'check_phone1') {
                content = `
                    <h2>üìû –†–ê–ë–û–ß–ò–ô –¢–ï–õ–ï–§–û–ù –ö–ê–ë–ò–ù–ï–¢–ê 101</h2>
                    
                    <div style="margin: 20px 0;">
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã:</h4>
                            <p>–ù–∞–π–¥–µ–Ω—ã –ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–Ω–æ–º–µ—Ä–∞ –¥–æ–º–æ–≤, —Å–µ–º—å–∏)</p>
                            <button class="button" onclick="showNotification('–õ–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã —É–¥–∞–ª–µ–Ω—ã')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã</button>
                            <button class="button tricky" onclick="triggerTrap('–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å –ª–∏—á–Ω—ã–º —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º')">üì± –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ì–æ–ª–æ—Å–æ–≤–∞—è –ø–æ—á—Ç–∞:</h4>
                            <p>–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç "—Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏" —Å –ø—Ä–æ—Å—å–±–æ–π –ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç—å –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä</p>
                            <button class="button danger" onclick="triggerTrap('–ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä')">üìû –ü–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç—å</button>
                            <button class="button" onclick="showNotification('–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ —Å–ø–∞–º')">üö´ –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Å–ø–∞–º</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</h4>
                            <p>PIN-–∫–æ–¥ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</p>
                            <button class="button" onclick="showNotification('PIN-–∫–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')">üî¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PIN</button>
                            <button class="button tricky" onclick="triggerTrap('–û—Å—Ç–∞–≤–∏–ª –±–µ–∑ –ø–∞—Ä–æ–ª—è "–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞"')">üòä –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="button success" onclick="completeTask('${taskId}')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                        <button class="button" onclick="closeModal('phone')">‚ùå –í–´–ô–¢–ò</button>
                    </div>
                `;
            } else {
                content = `
                    <h2>üìû –¢–ï–õ–ï–§–û–ù –ù–ê –†–ï–°–ï–ü–®–ï–ù–ï</h2>
                    
                    <div style="margin: 20px 0;">
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫:</h4>
                            <p>–°–æ–æ–±—â–µ–Ω–∏–µ: "–ö–æ–º–ø–∞–Ω–∏—è –û–û–û '–ê–ª—å—Ñ–∞', –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è: –ø–∞—Ä–æ–ª—å –∫ 1–° - –±—É—Ö–≥–∞–ª—Ç–µ—Ä123"</p>
                            <button class="button danger" onclick="triggerTrap('–û—Å—Ç–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–∞—Ä–æ–ª–µ–º')">üé§ –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å</button>
                            <button class="button" onclick="showNotification('–°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ')">üîä –ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                        </div>
                        
                        <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                            <h4>–ñ—É—Ä–Ω–∞–ª –≤—ã–∑–æ–≤–æ–≤:</h4>
                            <p>–ú–Ω–æ–≥–æ –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</p>
                            <button class="button" onclick="showNotification('–í—ã–∑–æ–≤—ã –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏')">üìä –ó–∞–ø–∏—Å–∞—Ç—å –≤ –æ—Ç—á–µ—Ç</button>
                            <button class="button tricky" onclick="triggerTrap('–ü–æ–∑–≤–æ–Ω–∏–ª –ø–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–º—É –Ω–æ–º–µ—Ä—É –∏–∑ –∂—É—Ä–Ω–∞–ª–∞')">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–º–µ—Ä</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="button success" onclick="completeTask('${taskId}')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                        <button class="button" onclick="closeModal('phone')">‚ùå –í–´–ô–¢–ò</button>
                    </div>
                `;
            }
            
            document.getElementById('phone-content').innerHTML = content;
            document.getElementById('phone-modal').style.display = 'flex';
        }
        
        function showRouterCheck() {
            const content = `
                <h2>üì∂ –ö–û–†–ü–û–†–ê–¢–ò–í–ù–´–ô –ú–ê–†–®–†–£–¢–ò–ó–ê–¢–û–†</h2>
                
                <div style="margin: 20px 0;">
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (12):</h4>
                        <p>3 –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å MAC-–∞–¥—Ä–µ—Å–∞–º–∏ –∏–∑ –ö–∏—Ç–∞—è</p>
                        <button class="button" onclick="showNotification('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã')">üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ</button>
                        <button class="button tricky" onclick="triggerTrap('–î–æ–±–∞–≤–∏–ª —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ "–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π"')">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ì–æ—Å—Ç–µ–≤–æ–π Wi-Fi:</h4>
                        <p>–ê–∫—Ç–∏–≤–µ–Ω, –ø–∞—Ä–æ–ª—å: guest123 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)</p>
                        <button class="button" onclick="showNotification('–ì–æ—Å—Ç–µ–≤–æ–π Wi-Fi –æ—Ç–∫–ª—é—á–µ–Ω')">üì¥ –û—Ç–∫–ª—é—á–∏—Ç—å</button>
                        <button class="button tricky" onclick="triggerTrap('–£—Å–∏–ª–∏–ª —Å–∏–≥–Ω–∞–ª –≥–æ—Å—Ç–µ–≤–æ–π —Å–µ—Ç–∏')">üì° –£—Å–∏–ª–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ü—Ä–æ—à–∏–≤–∫–∞:</h4>
                        <p>–í–µ—Ä—Å–∏—è 1.0.4 (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è 2.1.7)</p>
                        <button class="button" onclick="showNotification('–ü—Ä–æ—à–∏–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏')">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button class="button danger trap-button" onclick="triggerTrap('–°–∫–∞—á–∞–ª –ø—Ä–æ—à–∏–≤–∫—É —Å –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ —Å–∞–π—Ç–∞')">üíæ –°–∫–∞—á–∞—Ç—å —Å —Å–∞–π—Ç–∞</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ü–æ—Ä—Ç—Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥:</h4>
                        <p>–û—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã 22, 3389, 5900 –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π</p>
                        <button class="button" onclick="showNotification('–õ–∏—à–Ω–∏–µ –ø–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã')">üîí –ó–∞–∫—Ä—ã—Ç—å –ª–∏—à–Ω–∏–µ –ø–æ—Ä—Ç—ã</button>
                        <button class="button tricky" onclick="triggerTrap('–û—Ç–∫—Ä—ã–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è "—É–¥–∞–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã"')">üåê –û—Ç–∫—Ä—ã—Ç—å –µ—â–µ –ø–æ—Ä—Ç—ã</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button success" onclick="completeTask('check_router')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                    <button class="button" onclick="closeModal('router')">‚ùå –í–´–ô–¢–ò</button>
                </div>
            `;
            
            document.getElementById('router-content').innerHTML = content;
            document.getElementById('router-modal').style.display = 'flex';
        }
        
        function showServerCheck() {
            const content = `
                <h2>üóÑÔ∏è –°–ï–†–í–ï–†–ù–ê–Ø –ö–û–ú–ü–ê–ù–ò–ò</h2>
                
                <div style="margin: 20px 0;">
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:</h4>
                        <p>–ü–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø: 2 –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥</p>
                        <button class="button" onclick="showNotification('–ë—ç–∫–∞–ø –∑–∞–ø—É—â–µ–Ω, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ')">üíæ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø</button>
                        <button class="button tricky" onclick="triggerTrap('–û—Ç–∫–ª—é—á–∏–ª –±—ç–∫–∞–ø—ã "—á—Ç–æ–±—ã —ç–∫–æ–Ω–æ–º–∏—Ç—å –º–µ—Å—Ç–æ"')">üí∏ –û—Ç–∫–ª—é—á–∏—Ç—å –±—ç–∫–∞–ø—ã</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–î–æ—Å—Ç—É–ø—ã:</h4>
                        <p>5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–≤–∫–ª—é—á–∞—è —É–≤–æ–ª–µ–Ω–Ω—ã—Ö)</p>
                        <button class="button" onclick="showNotification('–ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ–Ω—ã')">üë• –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø—ã</button>
                        <button class="button danger" onclick="triggerTrap('–°–æ–∑–¥–∞–ª –æ–±—â–∏–π –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –≤—Å–µ—Ö IT')">üëë –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–π –∞–∫–∫–∞—É–Ω—Ç</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</h4>
                        <p>–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞</p>
                        <button class="button" onclick="showNotification('–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã')">üìä –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏</button>
                        <button class="button tricky" onclick="triggerTrap('–û—á–∏—Å—Ç–∏–ª –ª–æ–≥–∏ "—á—Ç–æ–±—ã –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∏ –º–µ—Å—Ç–æ"')">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–§–∏–∑–∏—á–µ—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</h4>
                        <p>–î–≤–µ—Ä—å –≤ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–ª—é—á</p>
                        <button class="button" onclick="showNotification('–í—ã–∑–≤–∞–Ω —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫ –¥–ª—è –ø–æ—á–∏–Ω–∫–∏ –∑–∞–º–∫–∞')">üîß –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ</button>
                        <button class="button tricky trap-button" onclick="triggerTrap('–ü–æ—Å—Ç–∞–≤–∏–ª –∑–∞–ø–∏—Å–∫—É "–ù–µ –≤—Ö–æ–¥–∏—Ç—å" –≤–º–µ—Å—Ç–æ –∑–∞–º–∫–∞')">üìù –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å–∫—É</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button success" onclick="completeTask('check_server')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                    <button class="button" onclick="closeModal('server')">‚ùå –í–´–ô–¢–ò</button>
                </div>
            `;
            
            document.getElementById('server-content').innerHTML = content;
            document.getElementById('server-modal').style.display = 'flex';
        }
        
        function showPrinterCheck() {
            const content = `
                <h2>üñ®Ô∏è –°–ï–¢–ï–í–û–ô –ü–†–ò–ù–¢–ï–† –ö–û–†–ò–î–û–†–ê</h2>
                
                <div style="margin: 20px 0;">
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–û—á–µ—Ä–µ–¥—å –ø–µ—á–∞—Ç–∏:</h4>
                        <p>43 –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–∂–∏–¥–∞—é—Ç –ø–µ—á–∞—Ç–∏, –≤–∫–ª—é—á–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ</p>
                        <button class="button" onclick="showNotification('–û—á–µ—Ä–µ–¥—å –æ—á–∏—â–µ–Ω–∞, –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —É–Ω–∏—á—Ç–æ–∂–µ–Ω—ã')">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å</button>
                        <button class="button tricky" onclick="triggerTrap('–†–∞—Å–ø–µ—á–∞—Ç–∞–ª –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã "–¥–ª—è –∞—Ä—Ö–∏–≤–∞"')">üìÑ –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –≤—Å–µ</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏:</h4>
                        <p>–ü—Ä–∏–Ω—Ç–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–π —Å–µ—Ç–∏</p>
                        <button class="button" onclick="showNotification('–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç—å—é')">üîí –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø</button>
                        <button class="button danger" onclick="triggerTrap('–û—Ç–∫—Ä—ã–ª –¥–æ—Å—Ç—É–ø –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π –ø–µ—á–∞—Ç–∏')">üåç –û—Ç–∫—Ä—ã—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ñ—É—Ä–Ω–∞–ª –ø–µ—á–∞—Ç–∏:</h4>
                        <p>–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–µ—á–∞—Ç–∞–ª —Ä–µ–∑—é–º–µ –∏ –ª–∏—á–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</p>
                        <button class="button" onclick="showNotification('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ HR')">üìã –°–æ–æ–±—â–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É</button>
                        <button class="button tricky" onclick="triggerTrap('–°–¥–µ–ª–∞–ª –∫–æ–ø–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ "–¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è"')">üëÅÔ∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ø–∏–∏</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button success" onclick="completeTask('check_printer')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                    <button class="button" onclick="closeModal('printer')">‚ùå –í–´–ô–¢–ò</button>
                </div>
            `;
            
            document.getElementById('printer-content').innerHTML = content;
            document.getElementById('printer-modal').style.display = 'flex';
        }
        
        function showSafeCheck() {
            const content = `
                <h2>üîê –°–ï–ô–§ –° –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ï–ô</h2>
                
                <div style="margin: 20px 0;">
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∑–∞–º–∫–∞:</h4>
                        <p>–ù–∞ —Å—Ç–∏–∫–µ—Ä–µ –Ω–∞ —Å–µ–π—Ñ–µ –Ω–∞–ø–∏—Å–∞–Ω–æ: 00-00-00</p>
                        <button class="button" onclick="showNotification('–°—Ç–∏–∫–µ—Ä —É–¥–∞–ª–µ–Ω, –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∞')">üè∑Ô∏è –£–¥–∞–ª–∏—Ç—å —Å—Ç–∏–∫–µ—Ä</button>
                        <button class="button danger" onclick="triggerTrap('–û—Å—Ç–∞–≤–∏–ª —Å—Ç–∏–∫–µ—Ä "—á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã—Ç—å"')">üß† –û—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –ø–∞–º—è—Ç–∏</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ–π—Ñ–∞:</h4>
                        <p>–î–æ–≥–æ–≤–æ—Ä–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –ø–µ—á–∞—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏, USB —Å –±–µ–∫–∞–ø–∞–º–∏</p>
                        <button class="button" onclick="showNotification('–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, –≤—Å–µ –Ω–∞ –º–µ—Å—Ç–µ')">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ</button>
                        <button class="button tricky" onclick="triggerTrap('–í–∑—è–ª USB –¥–æ–º–æ–π "–¥–ª—è —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏"')">üè† –ó–∞–±—Ä–∞—Ç—å –¥–æ–º–æ–π</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ñ—É—Ä–Ω–∞–ª –¥–æ—Å—Ç—É–ø–∞:</h4>
                        <p>–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–æ—Å—Ç—É–ø –±—ã–ª –≤ 20:45 (–ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è)</p>
                        <button class="button" onclick="showNotification('–î–æ—Å—Ç—É–ø –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω, –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ')">üîç –ò–∑—É—á–∏—Ç—å –∂—É—Ä–Ω–∞–ª</button>
                        <button class="button tricky trap-button" onclick="triggerTrap('–û—á–∏—Å—Ç–∏–ª –∂—É—Ä–Ω–∞–ª "—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –≤–æ–ø—Ä–æ—Å–æ–≤"')">üßπ –û—á–∏—Å—Ç–∏—Ç—å –∂—É—Ä–Ω–∞–ª</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button success" onclick="completeTask('check_safe')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                    <button class="button" onclick="closeModal('safe')">‚ùå –í–´–ô–¢–ò</button>
                </div>
            `;
            
            document.getElementById('safe-content').innerHTML = content;
            document.getElementById('safe-modal').style.display = 'flex';
        }
        
        function showDocumentsCheck() {
            const content = `
                <h2>üìÑ –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´</h2>
                
                <div style="margin: 20px 0;">
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –Ω–∞ —Å—Ç–æ–ª–µ:</h4>
                        <p>–†—É–∫–æ–ø–∏—Å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ —Å –ø–∞—Ä–æ–ª—è–º–∏ –∫ —Å–∏—Å—Ç–µ–º–∞–º</p>
                        <button class="button" onclick="showNotification('–ó–∞–º–µ—Ç–∫–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω—ã –≤ —à—Ä–µ–¥–µ—Ä–µ')">üóëÔ∏è –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å</button>
                        <button class="button tricky" onclick="triggerTrap('–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–ª –∑–∞–º–µ—Ç–∫–∏ "–Ω–∞ –ø–∞–º—è—Ç—å"')">üì∏ –°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–ù–µ–∑–∞–∫—Ä—ã—Ç—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:</h4>
                        <p>–ü–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã –ª–µ–∂–∞—Ç –Ω–∞ –≤–∏–¥—É</p>
                        <button class="button" onclick="showNotification('–î–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–º–µ—â–µ–Ω—ã –≤ —Å–µ–π—Ñ')">üîí –£–±—Ä–∞—Ç—å –≤ —Å–µ–π—Ñ</button>
                        <button class="button danger" onclick="triggerTrap('–û—Å—Ç–∞–≤–∏–ª –Ω–∞ —Å—Ç–æ–ª–µ "–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞"')">üèÉ –û—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –≤–∏–¥—É</button>
                    </div>
                    
                    <div style="border: 1px solid #444; padding: 10px; margin: 10px 0;">
                        <h4>–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:</h4>
                        <p>–° —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏, –∞–¥—Ä–µ—Å–∞–º–∏, –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –≤—Ö–æ–¥–∞</p>
                        <button class="button" onclick="showNotification('–°–ø–∏—Å–æ–∫ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ')">üîê –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>
                        <button class="button tricky" onclick="triggerTrap('–û—Ç–ø—Ä–∞–≤–∏–ª —Å–ø–∏—Å–æ–∫ –Ω–∞ –ª–∏—á–Ω—É—é –ø–æ—á—Ç—É')">üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–±–µ</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button success" onclick="completeTask('check_documents')">‚úÖ –ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–£</button>
                    <button class="button" onclick="closeModal('computer')">‚ùå –í–´–ô–¢–ò</button>
                </div>
            `;
            
            document.getElementById('computer-content').innerHTML = content;
            document.getElementById('computer-modal').style.display = 'flex';
        }
        
        function showUSBTrap() {
            const content = `
                <h2>‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù USB-–ù–ê–ö–û–ü–ò–¢–ï–õ–¨</h2>
                
                <div style="border: 2px solid #ff9900; padding: 20px; margin: 20px 0;">
                    <p style="color: #ff9900; font-size: 18px; text-align: center;">
                        ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –¢–ï–°–¢ –ù–ê –ë–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ ‚ö†Ô∏è
                    </p>
                    <p>–≠—Ç–æ —É—á–µ–±–Ω–∞—è –ª–æ–≤—É—à–∫–∞. –ù–∞—Å—Ç–æ—è—â–∏–π USB-–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:</p>
                    <ul style="margin: 10px 0 10px 20px;">
                        <li>–í—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–µ –ü–û</li>
                        <li>–ö–µ–π–ª–æ–≥–≥–µ—Ä—ã</li>
                        <li>–®–ø–∏–æ–Ω—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</li>
                    </ul>
                    <p style="color: #00ff00; font-weight: bold;">
                        –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ: –ù–ï –í–°–¢–ê–í–õ–Ø–¢–¨ –∏ —Å–æ–æ–±—â–∏—Ç—å –≤ —Å–ª—É–∂–±—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!
                    </p>
                </div>
                
                <div style="margin: 20px 0;">
                    <button class="button success" onclick="showNotification('‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! USB –æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –º–µ—Å—Ç–µ, —Å–æ–æ–±—â–µ–Ω–æ –≤ —Å–ª—É–∂–±—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏')">üö´ –ù–ï –í–°–¢–ê–í–õ–Ø–¢–¨</button>
                    <button class="button danger trap-button" onclick="triggerTrap('‚ùå –û–®–ò–ë–ö–ê: –í—Å—Ç–∞–≤–∏–ª USB –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä')">üíæ –í—Å—Ç–∞–≤–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <button class="button tricky" onclick="triggerTrap('‚ùå –û–®–ò–ë–ö–ê: –£–Ω–µ—Å USB –¥–æ–º–æ–π "–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏"')">üè† –ó–∞–±—Ä–∞—Ç—å –¥–æ–º–æ–π</button>
                </div>
                
                <div class="hint">
                    –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—É–¥–∏—Ç–∞, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞—à—É –±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button" onclick="closeModal('computer')">‚ùå –ó–ê–ö–†–´–¢–¨</button>
                </div>
            `;
            
            document.getElementById('computer-content').innerHTML = content;
            document.getElementById('computer-modal').style.display = 'flex';
        }
        
        function showCoffeeTrap() {
            const content = `
                <h2>‚òï –ö–û–§–ï-–ú–ê–®–ò–ù–ê –° –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï–ú –ö Wi-Fi</h2>
                
                <div style="border: 2px solid #ff9900; padding: 20px; margin: 20px 0;">
                    <p style="color: #ff9900; font-size: 18px; text-align: center;">
                        ‚ö†Ô∏è –≠–¢–û –ù–ï IT –û–ë–û–†–£–î–û–í–ê–ù–ò–ï! ‚ö†Ô∏è
                    </p>
                    <p>–£–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∫–æ—Ñ–µ-–º–∞—à–∏–Ω—ã, —á–∞–π–Ω–∏–∫–∏, –ª–∞–º–ø—ã) —á–∞—Å—Ç–æ:</p>
                    <ul style="margin: 10px 0 10px 20px;">
                        <li>–ò–º–µ—é—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –ø—Ä–æ—à–∏–≤–∫–∞—Ö</li>
                        <li>–ú–æ–≥—É—Ç –±—ã—Ç—å —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –≤ —Å–µ—Ç—å</li>
                        <li>–°–æ–±–∏—Ä–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö</li>
                    </ul>
                    <p style="color: #00ff00; font-weight: bold;">
                        –í —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è —ç—Ç–æ - –æ—Ç–≤–ª–µ–∫–∞—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É–≥—Ä–æ–∑–∞
                    </p>
                </div>
                
                <div style="margin: 20px 0;">
                    <button class="button success" onclick="showNotification('‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ö–æ—Ñ–µ-–º–∞—à–∏–Ω–∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ IT –∞—É–¥–∏—Ç—É')">üö´ –ü–†–û–ü–£–°–¢–ò–¢–¨</button>
                    <button class="button danger trap-button" onclick="triggerTrap('‚ùå –û–®–ò–ë–ö–ê: –ù–∞—á–∞–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ—Ñ–µ-–º–∞—à–∏–Ω—É –≤–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</button>
                    <button class="button tricky" onclick="triggerTrap('‚ùå –û–®–ò–ë–ö–ê: –°–≤–∞—Ä–∏–ª –∫–æ—Ñ–µ –≤–º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã')">‚òï –°–≤–∞—Ä–∏—Ç—å –∫–æ—Ñ–µ</button>
                </div>
                
                <div class="hint">
                    –ù–∞—Å—Ç–æ—è—â–∏–π –∞—É–¥–∏—Ç–æ—Ä —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∞ –Ω–µ –Ω–∞ –±—ã—Ç–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button" onclick="closeModal('computer')">‚ùå –ó–ê–ö–†–´–¢–¨</button>
                </div>
            `;
            
            document.getElementById('computer-content').innerHTML = content;
            document.getElementById('computer-modal').style.display = 'flex';
        }
        
        // ========== –ò–ì–†–û–í–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function triggerTrap(message) {
            gameState.trapsTriggered++;
            gameState.securityScore = Math.max(0, gameState.securityScore - 5);
            updateStats();
            showNotification(`‚ùå ${message} (-5%)`, true);
            closeCurrentModal();
        }
        
        function completeTask(taskId) {
            const task = securityTasks.find(t => t.id === taskId);
            if (task && !task.completed) {
                task.completed = true;
                gameState.completedTasks++;
                
                if (task.tricky && !task.isTrap) {
                    gameState.trickyTasksCompleted++;
                }
                
                gameState.securityScore = Math.min(100, gameState.securityScore + 3);
                updateTaskList();
                updateStats();
                showNotification(`‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: ${task.name}`);
                closeCurrentModal();
                
                checkAllTasksCompleted();
            }
        }
        
        function closeCurrentModal() {
            const modals = ['computer', 'phone', 'router', 'server', 'printer', 'safe'];
            for (const modal of modals) {
                const modalElement = document.getElementById(`${modal}-modal`);
                if (modalElement.style.display === 'flex') {
                    modalElement.style.display = 'none';
                    break;
                }
            }
        }
        
        function closeModal(modalName) {
            document.getElementById(`${modalName}-modal`).style.display = 'none';
        }
        
        function updateTaskList() {
            const tasksList = document.getElementById('tasks-list');
            tasksList.innerHTML = '';
            
            // –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
            securityTasks.forEach(task => {
                if (!task.isTrap) {
                    const taskElement = document.createElement('div');
                    taskElement.className = `task ${task.completed ? 'completed' : ''} ${task.tricky ? 'tricky' : ''}`;
                    taskElement.innerHTML = `
                        <strong>${task.completed ? '‚úÖ' : '‚ùå'} ${task.name}</strong>
                        <p style="font-size: 11px; color: #888; margin-top: 3px;">${task.description}</p>
                        <div style="font-size: 10px; color: #ff9900;">
                            ${task.isExit ? '–§–ò–ù–ê–õ–¨–ù–û–ï –ó–ê–î–ê–ù–ò–ï' : `–ë–∞–ª–ª—ã: ${task.points}`}
                        </div>
                    `;
                    
                    if (!task.completed && !task.isExit) {
                        taskElement.onclick = () => {
                            showNotification(`–ó–∞–¥–∞–Ω–∏–µ: ${task.name}. –ù–∞–π–¥–∏—Ç–µ –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–∞—Ä—Ç–µ.`);
                        };
                    }
                    
                    tasksList.appendChild(taskElement);
                }
            });
            
            // –õ–æ–≤—É—à–∫–∏ (–æ—Ç–¥–µ–ª—å–Ω–æ)
            const trapTasks = securityTasks.filter(t => t.isTrap);
            if (trapTasks.length > 0) {
                const trapHeader = document.createElement('div');
                trapHeader.innerHTML = '<h4 style="color: #ff9900; margin-top: 20px;">‚ö†Ô∏è –¢–ï–°–¢–û–í–´–ï –õ–û–í–£–®–ö–ò:</h4>';
                tasksList.appendChild(trapHeader);
                
                trapTasks.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = `task tricky ${task.completed ? 'completed' : ''}`;
                    taskElement.innerHTML = `
                        <strong>${task.completed ? 'üö´' : '‚ö†Ô∏è'} ${task.name}</strong>
                        <p style="font-size: 11px; color: #ff9900; margin-top: 3px;">${task.description}</p>
                    `;
                    
                    if (!task.completed) {
                        taskElement.onclick = () => {
                            showNotification('–ù–∞–π–¥–∏—Ç–µ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –≤ –æ—Ñ–∏—Å–µ (–ø–æ–º–µ—á–µ–Ω –æ—Ä–∞–Ω–∂–µ–≤—ã–º –Ω–∞ –∫–∞—Ä—Ç–µ)');
                        };
                    }
                    
                    tasksList.appendChild(taskElement);
                });
            }
        }
        
        function updateStats() {
            document.getElementById('security-score').textContent = `${gameState.securityScore}%`;
            document.getElementById('tasks-completed').textContent = 
                `${gameState.completedTasks}/${gameState.totalTasks}`;
            document.getElementById('violations-count').textContent = gameState.violations.length;
            
            const progressFill = document.getElementById('security-progress');
            progressFill.style.width = `${gameState.securityScore}%`;
            
            if (gameState.securityScore >= 80) {
                progressFill.style.background = '#00ff00';
            } else if (gameState.securityScore >= 60) {
                progressFill.style.background = '#ff9900';
            } else {
                progressFill.style.background = '#ff0000';
            }
        }
        
        function checkAllTasksCompleted() {
            const realTasks = securityTasks.filter(t => !t.isTrap && !t.isExit);
            const allCompleted = realTasks.every(task => task.completed);
            
            if (allCompleted) {
                const exitTask = securityTasks.find(t => t.isExit);
                if (exitTask) {
                    exitTask.description = '‚úÖ –í–°–ï –ó–ê–î–ê–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´! –ú–æ–∂–µ—Ç–µ –≤—ã—Ö–æ–¥–∏—Ç—å';
                    updateTaskList();
                    showNotification('üéâ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! –ú–æ–∂–µ—Ç–µ –≤—ã—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω—É—é –¥–≤–µ—Ä—å.', false);
                }
            }
        }
        
        function attemptExit() {
            const realTasks = securityTasks.filter(t => !t.isTrap && !t.isExit);
            const allCompleted = realTasks.every(task => task.completed);
            
            if (!allCompleted) {
                showNotification('‚ùå –ù–µ –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π.', true);
                return;
            }
            
            endGame();
        }
        
        function startTimer() {
            setInterval(() => {
                if (gameState.isDayEnded) return;
                
                let minutes = Math.floor(gameState.time);
                let seconds = Math.round((gameState.time - minutes) * 100);
                
                seconds += 1;
                if (seconds >= 60) {
                    minutes += 1;
                    seconds = 0;
                }
                
                gameState.time = minutes + seconds / 100;
                document.getElementById('time-display').textContent = formatTime(gameState.time);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤ 20:00
                if (minutes >= 20) {
                    endGame();
                    showNotification('‚è∞ –í—Ä–µ–º—è –∞—É–¥–∏—Ç–∞ –∏—Å—Ç–µ–∫–ª–æ!', true);
                }
            }, 1000);
        }
        
        function formatTime(time) {
            const minutes = Math.floor(time);
            const seconds = Math.round((time - minutes) * 100);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function endGame() {
            gameState.isDayEnded = true;
            
            // –†–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏
            const realTasks = securityTasks.filter(t => !t.isTrap && !t.isExit);
            const completedRealTasks = realTasks.filter(t => t.completed).length;
            const completionRate = Math.round((completedRealTasks / realTasks.length) * 100);
            
            // –ë–æ–Ω—É—Å—ã –∏ —à—Ç—Ä–∞—Ñ—ã
            let finalScore = gameState.securityScore;
            
            // –ë–æ–Ω—É—Å –∑–∞ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
            if (gameState.trickyTasksCompleted >= 2) {
                finalScore = Math.min(100, finalScore + 10);
            }
            
            // –®—Ç—Ä–∞—Ñ –∑–∞ –ª–æ–≤—É—à–∫–∏
            finalScore = Math.max(0, finalScore - (gameState.trapsTriggered * 5));
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç—á–µ—Ç
            showFinalReport(finalScore, completedRealTasks, realTasks.length);
        }
        
        function showFinalReport(score, completedTasks, totalTasks) {
            const finalScoreElement = document.getElementById('final-score');
            const reportDetails = document.getElementById('report-details');
            const completedTasksList = document.getElementById('completed-tasks-list');
            const finalViolations = document.getElementById('final-violations');
            const cyberAssessment = document.getElementById('cyber-literacy-assessment');
            const recommendationsList = document.getElementById('recommendations-list');
            
            // –û—Ü–µ–Ω–∫–∞
            let scoreClass = 'score-poor';
            let assessment = '';
            
            if (score >= 90) {
                scoreClass = 'score-excellent';
                assessment = '–û–¢–õ–ò–ß–ù–û. –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–∏–±–µ—Ä–≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏.';
            } else if (score >= 75) {
                scoreClass = 'score-good';
                assessment = '–•–û–†–û–®–û. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏–π –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.';
            } else if (score >= 60) {
                scoreClass = 'score-good';
                assessment = '–£–î–û–í–õ–ï–¢–í–û–†–ò–¢–ï–õ–¨–ù–û. –ï—Å—Ç—å –ø—Ä–æ–±–µ–ª—ã –≤ –∑–Ω–∞–Ω–∏—è—Ö.';
            } else {
                assessment = '–ù–ï–£–î–û–í–õ–ï–¢–í–û–†–ò–¢–ï–õ–¨–ù–û. –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ.';
            }
            
            finalScoreElement.className = `score-badge ${scoreClass}`;
            finalScoreElement.textContent = `${score}%`;
            
            // –î–µ—Ç–∞–ª–∏
            reportDetails.innerHTML = `
                <p>‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á: ${completedTasks} –∏–∑ ${totalTasks}</p>
                <p>‚ö†Ô∏è –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–≤—É—à–µ–∫: ${gameState.trapsTriggered}</p>
                <p>üéØ –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è: ${gameState.trickyTasksCompleted} –∏–∑ 3</p>
                <p>‚è±Ô∏è –í—Ä–µ–º—è –∞—É–¥–∏—Ç–∞: ${formatTime(gameState.time)}</p>
            `;
            
            // –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
            completedTasksList.innerHTML = '';
            securityTasks.forEach(task => {
                if (task.completed && !task.isTrap && !task.isExit) {
                    const item = document.createElement('p');
                    item.style.color = task.tricky ? '#ff9900' : '#00ff00';
                    item.textContent = `${task.tricky ? 'üéØ' : '‚úÖ'} ${task.name}`;
                    completedTasksList.appendChild(item);
                }
            });
            
            // –ù–∞—Ä—É—à–µ–Ω–∏—è
            finalViolations.innerHTML = '';
            if (gameState.trapsTriggered === 0) {
                finalViolations.innerHTML = '<p style="color: #00ff00;">‚úÖ –õ–æ–≤—É—à–∫–∏ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã</p>';
            } else {
                const trapCount = document.createElement('p');
                trapCount.style.color = '#ff6666';
                trapCount.textContent = `‚ö†Ô∏è –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–≤—É—à–µ–∫: ${gameState.trapsTriggered} (–ø–æ—Ç–µ—Ä—è–Ω–æ ${gameState.trapsTriggered * 5}%)`;
                finalViolations.appendChild(trapCount);
            }
            
            // –û—Ü–µ–Ω–∫–∞ –∫–∏–±–µ—Ä–≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏
            cyberAssessment.innerHTML = `
                <p style="color: ${scoreClass === 'score-excellent' ? '#00ff00' : scoreClass === 'score-good' ? '#ff9900' : '#ff0000'}; font-weight: bold;">
                    ${assessment}
                </p>
                <p>${getDetailedAssessment(score)}</p>
            `;
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            const recommendations = getRecommendations(score, gameState.trapsTriggered, completedTasks, totalTasks);
            recommendationsList.innerHTML = '';
            recommendations.forEach(rec => {
                const item = document.createElement('p');
                item.textContent = `‚Ä¢ ${rec}`;
                recommendationsList.appendChild(item);
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç—á–µ—Ç
            document.getElementById('final-report').style.display = 'flex';
        }
        
        function getDetailedAssessment(score) {
            if (score >= 90) {
                return '–í—ã –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–µ –ø–æ–¥–¥–∞–µ—Ç–µ—Å—å –Ω–∞ —É–ª–æ–≤–∫–∏ –∏ –ø–æ–Ω–∏–º–∞–µ—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —É–≥—Ä–æ–∑—ã.';
            } else if (score >= 75) {
                return '–í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –±–∞–∑–æ–≤—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏, –Ω–æ –∏–Ω–æ–≥–¥–∞ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç–µ—Å—å –Ω–∞ –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–ª–∏ —É–ª–æ–≤–∫–∏.';
            } else if (score >= 60) {
                return '–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ. –í—ã —á–∞—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π.';
            } else {
                return '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–π—Ç–∏ –ø–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.';
            }
        }
        
        function getRecommendations(score, traps, completed, total) {
            const recs = [];
            
            if (score < 70) {
                recs.push('–ü—Ä–æ–π—Ç–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫—É—Ä—Å "–û—Å–Ω–æ–≤—ã –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"');
            }
            
            if (traps > 0) {
                recs.push('–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –∏ —Ñ–∏—à–∏–Ω–≥—É');
            }
            
            if (completed < total) {
                recs.push('–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ–ª–∏—Ç–∏–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏');
            }
            
            if (score >= 85) {
                recs.push('–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ —É—Ä–æ–≤–Ω—è Security Specialist');
            } else {
                recs.push('–ü—Ä–æ–π–¥–∏—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç —á–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞');
            }
            
            recs.push('–í—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø—Ä–∏ —É—Ö–æ–¥–µ —Å —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞');
            recs.push('–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ USB-–Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏');
            recs.push('–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –≤–ª–æ–∂–µ–Ω–∏–π');
            
            return recs;
        }
        
        function showInstruction() {
            const content = `
                <h2>üéÆ –ö–ò–ë–ï–†-–ê–£–î–ò–¢: 3D –°–ò–ú–£–õ–Ø–¢–û–†</h2>
                
                <div style="margin: 20px 0;">
                    <h3>üéØ –í–ê–®–ê –¶–ï–õ–¨:</h3>
                    <p>–í—ã - –∞—É–¥–∏—Ç–æ—Ä –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ñ–∏—Å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º.</p>
                    
                    <h3>üïπÔ∏è –£–ü–†–ê–í–õ–ï–ù–ò–ï:</h3>
                    <ul style="margin: 10px 0 10px 20px;">
                        <li><strong>WASD</strong> - –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –æ—Ñ–∏—Å—É</li>
                        <li><strong>–ú—ã—à—å</strong> - –ø–æ–≤–æ—Ä–æ—Ç –∫–∞–º–µ—Ä—ã</li>
                        <li><strong>–õ–ö–ú</strong> - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã—à—å—é</li>
                    </ul>
                    
                    <h3>‚ö†Ô∏è –û–°–û–ë–ï–ù–ù–û–°–¢–ò:</h3>
                    <ul style="margin: 10px 0 10px 20px;">
                        <li>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç <span style="color: #ff9900">–ª–æ–≤—É—à–∫–∏</span></li>
                        <li>–ù–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</li>
                        <li>–í—ã—Ö–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á</li>
                        <li>–ö–∞–∂–¥–∞—è –æ—à–∏–±–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª</li>
                    </ul>
                    
                    <h3>üìä –û–¶–ï–ù–ö–ê:</h3>
                    <p>–í –∫–æ–Ω—Ü–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—Ü–µ–Ω–∫—É —Å–≤–æ–µ–π –∫–∏–±–µ—Ä–≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏ –æ—Ç 0 –¥–æ 100%</p>
                    
                    <div style="border: 2px solid #00ff00; padding: 15px; margin: 20px 0;">
                        <p style="color: #00ff00; text-align: center; font-weight: bold;">
                            –ü–æ–º–Ω–∏—Ç–µ: –ù–∞—Å—Ç–æ—è—â–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ë–î–ò–¢–ï–õ–¨–ù–´–ú!
                        </p>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="button success" onclick="closeCurrentModal()">üöÄ –ù–ê–ß–ê–¢–¨ –ê–£–î–ò–¢</button>
                </div>
            `;
            
            document.getElementById('computer-content').innerHTML = content;
            document.getElementById('computer-modal').style.display = 'flex';
        }
        
        function showNotification(message, isWarning = false) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${isWarning ? 'warning' : ''}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        function restartGame() {
            location.reload();
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.addEventListener('load', initGame);
    </script>
</body>
</html>
